<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Modbus TCP: Modbus Function Codes for Holding/Input Registers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Modbus TCP
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__register.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Modbus Function Codes for Holding/Input Registers</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga947960c26a88d9d3d6b6ce5cdd17cdbf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga947960c26a88d9d3d6b6ce5cdd17cdbf">ModbusTCP::readHoldingRegisters</a> (uint16_t, uint16_t)</td></tr>
<tr class="separator:ga947960c26a88d9d3d6b6ce5cdd17cdbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga450a3493a19359b0f7feb076111f7f25"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga450a3493a19359b0f7feb076111f7f25">ModbusTCP::readInputRegisters</a> (uint16_t, uint8_t)</td></tr>
<tr class="separator:ga450a3493a19359b0f7feb076111f7f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a35cffe7bb4b91bfe3bef4b22ba7afd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga8a35cffe7bb4b91bfe3bef4b22ba7afd">ModbusTCP::writeSingleRegister</a> (uint16_t, uint16_t)</td></tr>
<tr class="separator:ga8a35cffe7bb4b91bfe3bef4b22ba7afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c5bc3f4a78332fc7082ace14d103a5d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga3c5bc3f4a78332fc7082ace14d103a5d">ModbusTCP::writeMultipleRegisters</a> (uint16_t, uint16_t)</td></tr>
<tr class="separator:ga3c5bc3f4a78332fc7082ace14d103a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b565658e5b1109ada4d06b2d5730df3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga5b565658e5b1109ada4d06b2d5730df3">ModbusTCP::maskWriteRegister</a> (uint16_t, uint16_t, uint16_t)</td></tr>
<tr class="separator:ga5b565658e5b1109ada4d06b2d5730df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e067f34cf2fc815c2896526e19b6408"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga8e067f34cf2fc815c2896526e19b6408">ModbusTCP::readWriteMultipleRegisters</a> (uint16_t, uint16_t, uint16_t, uint16_t)</td></tr>
<tr class="separator:ga8e067f34cf2fc815c2896526e19b6408"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga5b565658e5b1109ada4d06b2d5730df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b565658e5b1109ada4d06b2d5730df3">&#9670;&nbsp;</a></span>maskWriteRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::maskWriteRegister </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16AndMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16OrMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x16 Mask Write Register.</p>
<p>This function code is used to modify the contents of a specified holding register using a combination of an AND mask, an OR mask, and the register's current contents. The function can be used to set or clear individual bits in the register.</p>
<p>The request specifies the holding register to be written, the data to be used as the AND mask, and the data to be used as the OR mask. Registers are addressed starting at zero.</p>
<p>The function's algorithm is:</p>
<p>Result = (Current Contents &amp;&amp; And_Mask) || (Or_Mask &amp;&amp; (~And_Mask))</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16WriteAddress</td><td>address of the holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16AndMask</td><td>AND mask (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16OrMask</td><td>OR mask (0x0000..0xFFFF) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
<a id="ga947960c26a88d9d3d6b6ce5cdd17cdbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga947960c26a88d9d3d6b6ce5cdd17cdbf">&#9670;&nbsp;</a></span>readHoldingRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::readHoldingRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16ReadAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16ReadQty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x03 Read Holding Registers.</p>
<p>This function code is used to read the contents of a contiguous block of holding registers in a remote device. The request specifies the starting register address and the number of registers. Registers are addressed starting at zero.</p>
<p>The register data in the response buffer is packed as one word per register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16ReadAddress</td><td>address of the first holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16ReadQty</td><td>quantity of holding registers to read (1..125, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
<a id="ga450a3493a19359b0f7feb076111f7f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga450a3493a19359b0f7feb076111f7f25">&#9670;&nbsp;</a></span>readInputRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::readInputRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16ReadAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u16ReadQty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x04 Read Input Registers.</p>
<p>This function code is used to read from 1 to 125 contiguous input registers in a remote device. The request specifies the starting register address and the number of registers. Registers are addressed starting at zero.</p>
<p>The register data in the response buffer is packed as one word per register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16ReadAddress</td><td>address of the first input register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16ReadQty</td><td>quantity of input registers to read (1..125, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
<a id="ga8e067f34cf2fc815c2896526e19b6408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e067f34cf2fc815c2896526e19b6408">&#9670;&nbsp;</a></span>readWriteMultipleRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::readWriteMultipleRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16ReadAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16ReadQty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteQty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x17 Read Write Multiple Registers.</p>
<p>This function code performs a combination of one read operation and one write operation in a single MODBUS transaction. The write operation is performed before the read. Holding registers are addressed starting at zero.</p>
<p>The request specifies the starting address and number of holding registers to be read as well as the starting address, and the number of holding registers. The data to be written is specified in the transmit buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16ReadAddress</td><td>address of the first holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16ReadQty</td><td>quantity of holding registers to read (1..125, enforced by remote device) </td></tr>
    <tr><td class="paramname">u16WriteAddress</td><td>address of the first holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16WriteQty</td><td>quantity of holding registers to write (1..121, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
<a id="ga3c5bc3f4a78332fc7082ace14d103a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c5bc3f4a78332fc7082ace14d103a5d">&#9670;&nbsp;</a></span>writeMultipleRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::writeMultipleRegisters </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteQty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x10 Write Multiple Registers.</p>
<p>This function code is used to write a block of contiguous registers (1 to 123 registers) in a remote device.</p>
<p>The requested written values are specified in the transmit buffer. Data is packed as one word per register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16WriteAddress</td><td>address of the holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16WriteQty</td><td>quantity of holding registers to write (1..123, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
<a id="ga8a35cffe7bb4b91bfe3bef4b22ba7afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a35cffe7bb4b91bfe3bef4b22ba7afd">&#9670;&nbsp;</a></span>writeSingleRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusTCP::writeSingleRegister </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16WriteValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modbus function 0x06 Write Single Register.</p>
<p>This function code is used to write a single holding register in a remote device. The request specifies the address of the register to be written. Registers are addressed starting at zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u16WriteAddress</td><td>address of the holding register (0x0000..0xFFFF) </td></tr>
    <tr><td class="paramname">u16WriteValue</td><td>value to be written to holding register (0x0000..0xFFFF) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
